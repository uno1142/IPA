# 主キーと外部キー

行を特定したり，表と表に関係をもたせたりするためには，主キーや外部キーといった「鍵となる情報」が必要。  

データベースの表の中にはその中の行ひとつひとつを識別できるようにキーとなる情報が必ず含まれており，これを主キーと呼ぶ。  
また，表と表を関連付けるため，他の表の主キーを参照する列のことを外部キーと呼ぶ。  

主キーの例）　社員番号，学生番号など

表の中で，一意であることが保証された列がひとつであるとは限らない。このようなキーのことを候補キーという。  
また，主キーとして選ばれたキーがすでにある場合はこれは代替キーとなる。  


## 整合性制約

データベースには，格納されているデータの整合性を保つために，いくつかの制約が定められている。これを整合性制約という。   
主キーに選ばれた列には，次の制約が課される。 

- 一意性制約　→ データに重複がなく，必ず一意であること。これが指定された列では，テーブルに含まれる全ての行で重複は許されない。
- NOR NULL制約　→ NULLとは値が未設定であること。これが指定された列では，必ず意味のある値が入っていなければならない。  

また，ひとつの列では一意にならないが，複数の列を組み合わせれば一位になるという場合がある。このように  
複数の列を組み合わせて主キーとしたものを「複合キー」と呼ぶ。  


## 外部キー

表と表を関連付けるため，他の表の主キーを参照する列のことを外部キーと呼ぶ。  
外部キーでは，次の制約によって他の表への参照が常に保証されている必要がある。  

- 参照制約　→　外部キーに含まれる値は，参照先となる表の列ないに必ず存在しなければならない。  

しかし，保証されている必要があると言っても「参照元があるにもかかわらずその行を削除」のような操作を行えば簡単に崩れてしまう。
RDBにはこのような場合にも制約を維持するための仕組みが設けられており，その中でも一番基本的なものは「無効にすること」  
制約を満たさない更新操作は無効として拒否してしまう。  


## インデックス

インデックスとは索引として用いるキーのことで，これを設定することにより検索効率を高め，速度の向上を図ることができる。  
ただし，インデックスは表とは別にデータを保持するため，表の内容が更新されるとインデックス側の更新も必要になる。  
そのため，データの追加／更新／削除時の処理速度は低下する。  
