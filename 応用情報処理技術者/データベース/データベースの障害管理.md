# データベースの障害回復

データベースは障害の発生に備えて定期的にバックアップを取ることが基本。  
１日に１回などの頻度を決めて、その時点でのデータベース内容を丸ごと別のファイルにコピーして保管する。  

ただし、バックアップのみでは次のバックアップまでの間に更新された内容を保存できない。  
そのため、バックアップ後の更新は「ジャーナル」とよばれるログファイルに更新前の状態(更新前ジャーナル)と  
更新後の状態(更新後ジャーナル)を逐一記録し、更新履歴を管理するようにしている。  

実際に障害が発生した場合は、これらのファイルを使ってロールバックやロールフォワードなどの障害回復処理を行い、以前の状態に復旧する。  


## コミットとロールバック

データベースはトランザクション単位で更新処理を管理する。  
すなわち「トランザクション内の更新すべてを反映する」か「トランザクション内の更新すべてを取り消す」かのどちらかしかない。  

トランザクションは、一連の処理が問題なく完了できたとき、最後にその更新を確定することでデータベースへと更新内容を反映させる。  
これをコミットと呼ぶ。(Git-commitはコレ！)

