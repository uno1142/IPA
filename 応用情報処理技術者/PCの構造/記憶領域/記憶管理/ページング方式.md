# ページング方式

ページング方式では、プログラムを「ページ」という単位で固定長の領域に区切って管理する。  
現在のＯＳではデマンドページングという「実行に必要なページのみを実記憶に読み込ませる」方法が主流になっている。 

デマンドページングでは、最初に仮想記憶に割り当てた段階ではまだ実記憶に読み込まない。  
これを実行しようとすると実記憶上にはページがないので、その時に対象ぺージを実記憶に読み込むという手順を踏む。  
この時の必要なページが実記憶上にないとき発生する割り込みのことを「ページフォールト」と呼ぶ。  

## ページテーブル

仮想記憶と実記憶との対応付けは、ページテーブルという表によって管理される。  
ページテーブルを参照して目的のページが実記憶上にないと判明したら、補助記憶から実記憶へとそのページが読み込まれる。  

例えば仮想アドレスが  
0100000000001100  
だった場合どのような流れになるかみていく。  

まずは先頭数ビット(今回は4)を見て仮想ページ番号を取得し、ページテーブルの中身を検索する。  


-実記憶上に存在している場合-  

ここで得られたアドレスはあくまでも実記憶上にあるページ枠の先頭アドレスでしかない。  
したがって、仮想アドレスのページ内変位部をこのアドレスに加算する。これによって実アドレスが得られる。  

-実記憶上に存在しない場合-  

実記憶への読み込みが発生する。補助記憶から実記憶へのページ読み込みを「ページイン」と呼ぶ。  
また、ページインしようとしたら、すでに実記憶がいっぱいだった…という場合にはいずれかのページを補助記憶へ追い出して空きを作らなければならない。  
実記憶から補助記憶へとページを追い出すことを「ページアウト」と呼ぶ。  

実記憶の容量が少ないと、ページの置き換えを必要とする頻度が高くなり、システムの処理効率が極端に低下することがある。  
この現象を「スラッシング」と呼ぶ。


## ページの置き換えアルゴリズム

なにかをページアウトしなければならないとき、やみくもに追い出せばいいというわけではない。  
したがって、何をページアウトさせるかの判断が大事になってくる。  

大きく分けて４つのアルゴリズムがある。  

#### FIFO方式

First In First Out  
そのまんま、最初にページインしたページを追い出し対象にする。  

#### LIFO方式

Last In First Out  
最後にページインしたページを追い出す。  

#### LRU方式

Least Recently Used  
もっとも長い間参照されていないページを追い出し対象にする。  

#### LFU方式

Least Frequently Used  
もっとも参照回数の少ないページを追い出し対象にする。  


## スワッピングとページング

広義では同じだが、本試験内では狭義のスワッピングを採用しており、  
「ページ単位で領域の出し入れを行うもの」をページング  
「プロセス単位で領域の出し入れを行うもの」をスワッピングとして、明確に区別している。注意しよう。 


