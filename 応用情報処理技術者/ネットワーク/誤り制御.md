# データの誤り制御

データの誤りとは、ビットの内容が0→1や1→0とノイズやひずみによって異なる値に化けてしまうこと。  
データの誤りを100%確実に防ぐ手段はない。そこでパリティチェックやCRC(巡回冗長検査)などの手法を用いて誤りを検出したり訂正する。  

## パリティチェック

パリティチェックでは、送信するビット列に対してパリティビットと呼ばれる検査用のビットを付加することでデータの誤りを検出する。  

パリティビットを付加する方法は偶数パリティ、奇数パリティの2種類があり、それぞれビット列の中の1の数が偶数/奇数になるように値をセットする。  

ただしパリティチェックでは1bitの誤りを検出することしかできない。偶数個のビット誤りは検出できないう上、どのビットが誤りかもわからない。  
したがってこの方法では誤り訂正も行えない。  

## 水平垂直パリティチェック

パリティビットは「どの方向に付加するか」によって垂直パリティと水平パリティにわかれる。  
これは例えばabcdeという文字列があった場合、文字列全体を並べた時の各ビットの位置単位で付加するのが水平パリティ  
abcdeという文字列全体(データ単位)で付加するのが垂直パリティ。  


この２つのパリティを組み合わせて使うのが水平垂直パリティ。縦横両面から誤りを検出できるので１ビットの誤りであれば位置を特定でき、誤り訂正が行える、


## CRC(巡回冗長検査)

CRC(Cyclic Redundancy Check)は、ビット列を特定の式(生成多項式と呼ばれる)で割り、その余りをチェック用のデータとして付加する方法。  
送信側はビット列を生成多項式で割った余りをもともとのビット列にくっつけて送信データにする。  
こうすることでそのデータは計算に用いた生成多項式で割り切れるはずの数になる。  

データ受信側は送信側と同一の生成多項式を使って受信データを割り算し、余りがなければ誤りがないと判断する。  
この方式ではデータの誤り訂正はできないが、連続したビットの誤り(バースト誤り)などの複数ビットの誤りを検出することができる。  


## ハミング符号

ハミング符号とは、ビット列に対して検査用の冗長ビットを付加することで、２ビットまでの誤り検出と、１ビットの誤り訂正をできるようにしたもの。  
ハミング符号では、元のビット列から異なる組み合わせパターンを作り、それぞれの排他的論理和を求めることで検査用の冗長ビットを算出する。  
※ざっくりいうと、１の個数が奇数なら1,偶数なら0

これに対し、受け取り側は受信したデータから同じ組み合わせを作り、それと対になる冗長ビットを合わせて排他的論理和を求める。  
求めた排他的論理和がすべて０となればデータに問題はない。  
ハミング符号は誤りを訂正する符号方式としてはもっとも古く、あまり訂正能力は高くない。  
しかしシンプルなぶん高速に処理を行えるため、もともとの信頼性が高く高速性が求められる分野(ECCメモリやRAID2など)で利用される。 

※おさらい：RAID2と「複数のハードディスクを組み合わせて１台のハードディスクに見せかける方法」


## ビット誤り率

受信したビット列の中にどれくらいの割合でビットの誤りが発生するかを表すのがビット誤り率。  

`ビット誤り率　＝　誤りが生じたビット数　÷　送信ビット数`  
公式にするほどもないくらい当たり前。

